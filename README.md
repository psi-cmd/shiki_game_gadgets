# shiki_game_gadgets

socket.ahk 来自 https://github.com/G33kDude/Socket.ahk/blob/master/Socket.ahk

目前包括接龙、吊死鬼游戏相关

### 使用方法

requirements: python>=3.6, autohotkey 以及 python 的 pyperclip 模块。

保持目录结构。

##### 接龙

1. 先运行 py 脚本 `python solitaire.py` ，开始监听 2501 端口；

2. 此时双击运行 listen2501.ahk，运行成功后 py 程序从阻塞中恢复，提示输入起始拼音；

3. 输入起始拼音并回车，py 等待键盘指令；

4. 定位到对话框，键盘按下 `Ctrl+n`，光标提示 ok，并同时发送 `Ctrl+v` 触发一次粘贴；

5. 正常情况下生成 **.jl [名词]** 于对话框中，按`Ctrl+Enter` 发送；

6. 等待回复，不应立即生成下一词；

   1. 如该词被正常检测到，则可以按下 `Ctrl+n` 并重复上述过程
   2. 如未被正常检测，则需要使用`Ctrl+r` 换词
   3. 如果明显发现该词不在对方词库中，则可以考虑使用 `Ctrl+d` 暂时屏蔽该词。（有几率 bug 掉导致程序卡死）

   - 如果不幸车速过快，请不要关闭程序重启，因为不会记重复的词。此时使用 `Ctrl+s` 停止自动接龙，但保留之前接过词的记录。此时将弹出一条消息

     > please input next syllabus, then press ctrl+V before ctrl+N
     
     跳回到运行 py 脚本的界面，写下要接龙的拼音，回车后不要急着按 Ctrl+n，因为第一个词已经生成，需要先粘贴出来。（这里可以再改进，直接粘词进去继续接龙就好）
     
     - 如果你忘记了，可以 `win+v` 调出之前内容的剪贴板，选择被你忽略的词。

如果发现 py 报端口占用错误，一般是上一次没关。如果的确有程序占用，两边改下端口。

模式：现有三种模式，第一个是比较苟的 longest，可以在下一个可能词集合中选择最能接下去的词，详见代码。第二种是随缘的 random，可能会在犄角处死亡（这里可以通过高级的过滤条件加以避免）。第三种使用特殊的直死dict，相当于一个链表规则，~~且固定在神灵庙被早苗打死~~。如果扩充死亡词汇，说不定可以三步必杀。

当然对于对战模式，完全可以参考 hang.py 使用复制作为输入手段，将对方输入塞入已用词库并储存，接龙的人多可以大块复制并过滤······不过我觉得可能打不过输入法。（shugen 群友提供的方案也可以作为查询手段）

> longest 比较没有意思，因为无论开始是什么词，最后一定会 merge。

（想到了再补）

##### 吊死鬼

1. 同理，先 py，再 listen2502.ahk；

2. 启动 dsg 对话，并将四季酱整句话放入剪贴版（或只需要保证未知词是完整的就行）

   这里推荐使用 `Ctrl+Shift+c` 代替 `Ctrl+c`，因为快捷键修改后 `Ctrl+Shift+c` 可以直接展示剪贴板内容，便于确认，且该脚本快捷键统一以 Ctrl+Shift 作为前缀。

3. 随后 `Ctrl+Shift+s` 进行查询，结果自动以 **.hang [可能的英文词]** 出现在对话框。

4. 发送，等待结果。

5. 无论结果猜中了多少，都需要再次复制四季酱返回内容，并重复查询。

6. 当结果小于 20 个候选词时，光标将弹出所有候选词提示。可以手动排除不合理的词。

7. 正常情况下，一轮结束， `Ctrl+Shift+r` 将重置 py 脚本的记忆，并自动打出 **.hang**，发送即可开始下一局。

   - 如果忘记此项操作，一般脚本也会自动进入 restart，但需要小心有概率 bug。

事实上，由于词库不是很全，所以需要添加词来完善。如果需要添加英文单词，请在剪贴板中只保留英文单词，并使用 `Ctrl+Shift+a` 直接添加，成功返回 Ok，失败则返回 failure。

批量添加也显得省事得多，爬过来新词直接加入 list 存回 zunglish.json 即可

> 注意，词中有大量假名，有包括但不限于 minecraft、wiki、http 等无关词汇，但是不怎么影响猜词。

（想到了再补）

~~炼丹警告：如果发现你的机器在炼丹，请直接关掉 py 脚本和 ahk 脚本，重新开始吧。当然也可以自己 debug 一下。~~

如果提示框像膏药一样黏在屏幕上不消失，是因为 ahk 脚本还在运行，如果结束 ahk 对应进程就可以去除。

### 更新条目方法

通过各种手段获得的某一专题词汇可以通过 json 序列化等方法储存，但由于 python 下 pypinyin 模块的多音字准确度极差（会将某一些字标出历史上从来没有过的读音），必须使用 js 中的 pinyin 模块提供拼音数据来源。所以一定要同步用 js 更新拼音（就是那个简陋的.js，把文件名改改就用吧）。

### 吐槽

这样做真的有点大费周章，尤其是 python 和 autohotkey 隔空喊话。（只是单纯想做一个 socket 通信的幼稚实例罢了）

其实如果最终目的不是把词库挖空的话，4000多个词也是够玩一年的了。

对于其他题目的看法：

$A_{10}^4$ 应该说是一个需要信息论解决的题？反正我比较菜，没学过信息论。最终目的是要充分利用每一次返回的信息，进行最合适的决策，得到平均最短策略。

专业术语就 emmm，不混相关学科圈，内存都没预热，怎么查找。。费力找到了也没有用武之地，终究被 LRU 策略覆盖。可能的寻找方式一个是 wiki glossary，再高阶点就是从英文教材附录上撸词下来筛。过了解谜瘾后很快意识到耗不起（


